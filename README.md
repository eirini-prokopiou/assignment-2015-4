# Καταστροφή Δικτύου

Υπάρχουν διαφόρων ειδών δίκτυα: υπολογιστών, διανομής ρεύματος, συνδέσμων σε κοινωνικά δίκτυα, κ.ά. Κάποιες φορές χρειάζεται να βρούμε τον καλύτερο τρόπο να *καταστρέψουμε* ένα δίκτυο. Για παράδειγμα, σε ένα δίκτυο που αναπαριστά πιθανές σχέσεις μετάδοσης ασθενειών μεταξύ ανθρώπων, όπου οι κόμβοι είναι οι άνθρωποι οι οποίοι συνδέονται με άλλους ανθρώπους στους οποίους μπορούν να μεταδώσουν μία νόσο, μπορούμε να αποτρέψουμε μια επιδημία αν εντοπίσουμε ποιους ανθρώπους πρέπει να εμβολιάσουμε ώστε πλέον η ασθένεια να μην μπορεί να μεταδοθεί. Σε ένα άλλο παράδειγμα, αν μεταδίδεται μια ψευδής πληροφορία μέσω ενός κοινωνικού δικτύου, μπορούμε να σταματήσουμε τη μετάδοσή της αν στοχεύσουμε σε συγκεκριμένα μέλη ενός δικτύου τα οποία παίζουν ιδιαιτέρως σημαντικό ρόλο στη μετάδοση της πληροφορίας.

Για την καταστροφή ενός δικτύου πρέπει λοιπόν να εντοπίσουμε τους κόμβους εκείνους οι οποίοι έχουν τη μεγαλύτερη επιρροή στο συνολικό δίκτυο. Ένας τρόπος είναι να εργαστούμε ως εξής:

1. Εντοπίζουμε τον κόμβο με το μεγαλύτερο αριθμό συνδέσμων.
2. Αφαιρούμε αυτόν τον κόμβο.
3. Επιστρέφουμε στο βήμα 1.

Επαναλαμβάνουμε τα βήματα 1-3 για όσους κόμβους θέλουμε.

Στην παρακάτω εικόνα μπορείτε να δείτε πώς καταστρέφουμε ένα δίκτυο αφαιρώντας τους τέσσερεις κόμβους με τον μεγαλύτερο κάθε φορά αριθμό συνδέσμων.

![Network Destruction 1](/network-destruction-1.png)

Με τον τρόπο αυτό, βλέπουμε ότι μετά από την αφαίρεση τεσσάρων κόμβων, το μεγαλύτερο συνδεδεμένο κομμάτι (connected component) του δικτύου περιέχει 17 κόμβους.

Ένας άλλος τρόπος εργασίας είναι σε πολλά δίκτυα πιο αποτελεσματικός. Αντί να θεωρούμε ότι ο κόμβος με τη μεγαλύτερη επιρροή είναι αυτός με τους περισσότερους συνδέσμους, ορίζουμε τη *συνολική επιρροή* (collective influence) ενός κόμβου ως εξής:

![Collective Influence](/ci_definition.png)

Στον παραπάνω ορισμό, ![i definition](/i_definition.png) είναι ο κόμβος του οποίου υπολογίζουμε τη συνολική επιρροή, ![ki definition](/ki_definition.png) είναι ο αριθμός συνδέσμων του κόμβου ![i definition](/i_definition.png), και ![Theta Ball definition](/theta_ball_definition.png) είναι το σύνολο των κόμβων των οποίων το συντομότερο μονοπάτι από τον κόμβο ![i definition](/i_definition.png) έχει μήκος ![r definition](/r_definition.png). Αν μπορούσατε να ζωγραφίσετε έναν κύκλο με ακτίνα ![r definition](/r_definition.png) συνδέσμους γύρω από τον κόμβο ![i definition](/i_definition.png), οι κόμβοι ![j definition](/j_definition.png) είναι οι κόμβοι που θα πέφτανε πάνω στην περιφέρεια του κύκλου.

Με άλλα λόγια, για να υπολογίσουμε τη συνολική επιρροή ενός κόμβου, βρίσκουμε τους κόμβους που το συντομότερο μονοπάτι τους από τον κόμβο ![i definition](/i_definition.png) είναι ίσο με ![r definition](/r_definition.png) και σχηματίζουμε το άθροισμα που προκύπτει από τον αριθμό συνδέσμων του καθενός, ![j definition](/j_definition.png), από αυτούς τους κόμβους μείον ένα. Στη συνέχεια πολλαπλασιάζουμε το αποτέλεσμα με τον αριθμό συνδέσμων του κόμβου ![i definition](/i_definition.png) μείον ένα.

Συνεπώς για να καταστρέψουμε ένα δίκτυο χρησιμοποιώντας τη συνολική επιρροή, εργαζόμαστε ως εξής:

1. Εντοπίζουμε τον κόμβο με τη μεγαλύτερη συνολική επιρροή.
2. Αφαιρούμε αυτόν τον κόμβο.
3. Επιστρέφουμε στο βήμα 1.

Επαναλαμβάνουμε τα βήματα 1-3 για όσους κόμβους θέλουμε.

Στην παρακάτω εικόνα μπορείτε να δείτε πώς καταστρέφουμε ένα δίκτυο αφαιρώντας τους τέσσερεις κόμβους με τη μεγαλύτερη κάθε φορά συνολική επιρροή, έχοντας ![r equals to](/r_two.png).

![Network Destruction 2](/network-destruction-2.png)

Με τον τρόπο αυτό βλέπουμε ότι μετά από την αφαίρεση ήδη τριών κόμβων, το μεγαλύτερο συνδεδεμένο κομμάτι του δικτύου περιέχει εννέα μόνο κόμβους. Άρα ήδη με τρεις κόμβους έχουμε επιτύχει καλύτερη καταστροφή από ό,τι με τέσσερεις κόμβους με την προηγούμενη μέθοδο. Ο κόμβος 10 αφαιρείται πρώτος καθώς έχει τη μεγαλύτερη επιρροή, ίση με 63. Επιβεβαιώστε τον υπολογισμό αυτό ώστε να καταλάβετε τον ορισμό της συνολικής επιρροής.

Σκοπός της εργασίας είναι η κατασκευή ενός προγράμματος σε γλώσσα Python 3 το οποίο θα μπορεί να διαβάζει ένα αρχείο που περιγράφει ένα γράφο και να τον καταστρέφει με τους δύο αυτούς τρόπους.

## Απαιτήσεις Προγράμματος

Κάθε φοιτητής θα εργαστεί στο προσωπικό του αποθετήριο στο GitHub. Για να αξιολογηθεί μια εργασία θα πρέπει να πληροί τις παρακάτω προϋποθέσεις:

1. Όλη η εργασία θα πρέπει να βρίσκεται σε έναν κατάλογο `assignment-2015-4` μέσα στο αποθετήριο του φοιτητή.

2. Το πρόγραμμα θα πρέπει να έχει όνομα `network_destruction.py`.

3. Για την υλοποίηση του γράφου θα πρέπει να χρησιμοποιήσετε λίστες γειτνίασης (adjacency lists) και όχι πίνακα γειτνίασης (adjacency matrix). Εννοείται ότι δεν επιτρέπεται η έτοιμων βιβλιοθηκών γράφων.

4. Το πρόγραμμα θα μπορεί να καλείται ως εξής:
```bash
python network_destruction.py [-c] [-r RADIUS] num_nodes input_file
```
Οι αγκύλες δεν αποτελούν μέρος των πραγμάτων που δίνει ο χρήστης, απλώς χρησιμεύουν για να μας υπενθυμίζουν στην περιγραφή του προγράμματος ότι η συγκεκριμένη παράμετρος είναι προαιρετική. Έτσι έχουμε:

  * Αν δίνεται η παράμετρος`-c`, το πρόγραμμα θα χρησιμοποιεί τον αριθμό συνδέσμων κάθε κόμβου και όχι τη συνολική επιρροή. Δηλαδή, θα λειτουργεί όπως το πρώτο παράδειγμα που δώσαμε. Διαφορετικά, το πρόγραμμα θα χρησιμοποιεί τη συνολική επιρροή, δηλαδή θα λειτουργεί όπως το δεύτερο παράδειγμα.
  * Αν δίνεται η παράμετρος `-r RADIUS` το πρόγραμμα θα χρησιμοποιεί την τιμή `RADIUS` για το ![r definition](/r_definition.png).  
  * Η παράμετρος `num_nodes` αντιστοιχεί στον αριθμό των κόμβων που θέλουμε να αφαιρέσουμε.
  * Η παράμετρος `input_file` είναι το όνομα του αρχείου που περιγράφει τον γράφο.

Το αρχείο `input_file` θα είναι της μορφής:

```
1 2
1 3
2 4
...
```
δηλαδή αποτελείται από γραμμές που η κάθε μία περιέχει δύο αριθμούς. Αν οι δύο αριθμοί είναι οι `x` και `y`, ο γράφος θα έχει ένα σύνδεσμο μεταξύ των κόμβων `x` και `y`. Ο γράφος δεν θα είναι κατευθυνόμενος, άρα θα θεωρούμε πάντα ότι θα υπάρχει και ο αντίστροφος σύνδεσμος από το `y` στο `x`. Οι κόμβοι θα είναι πάντα αριθμοί και θα είναι 1, 2, ...

### Περιγραφή Εξόδου

Η έξοδος του προγράμματος θα ιχνηλατεί τη λειτουργία του, και θα είναι *ακριβώς* όπως περιγράφεται στη συνέχεια. *Προσοχή:* αν η έξοδος δεν είναι ακριβώς σύμφωνη με την περιγραφή της, η εργασία *δεν θα μπορεί να αξιολογηθεί*.

Αν χρησιμοποιήσουμε το αρχείο υπόδειγμα [destruction_example_1.txt](destruction_example_1.txt) ως εξής:
```bash
python network-destruction.py -r 2 4 destruction_example_1.txt
```
θα πάρουμε ακριβώς:
```
Size: 30 members: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,
    18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
Removing node: 10 with metric: 63
Size: 29 members: [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 17, 18,
    19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
Size: 1 members: [10]
Removing node: 16 with metric: 51
Size: 28 members: [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 17, 18, 19,
    20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
Size: 1 members: [10]
Size: 1 members: [16]
Removing node: 20 with metric: 30
Size: 9 members: [1, 2, 3, 4, 5, 6, 7, 8, 9]
Size: 1 members: [10]
Size: 9 members: [11, 12, 13, 14, 17, 18, 19, 26, 30]
Size: 9 members: [15, 21, 22, 23, 24, 25, 27, 28, 29]
Size: 1 members: [16]
Size: 1 members: [20]
Removing node: 6 with metric: 9
Size: 6 members: [1, 4, 5, 7, 8, 9]
Size: 1 members: [2]
Size: 1 members: [3]
Size: 1 members: [6]
Size: 1 members: [10]
Size: 9 members: [11, 12, 13, 14, 17, 18, 19, 26, 30]
Size: 9 members: [15, 21, 22, 23, 24, 25, 27, 28, 29]
Size: 1 members: [16]
Size: 1 members: [20]
```

Αν χρησιμοποιήσουμε το αρχείο υπόδειγμα [destruction_example_1.txt](destruction_example_1.txt) ως εξής:
```bash
python network-destruction.py -c 4 destruction_example_1.txt
```
θα πάρουμε ακριβώς:
```
Size: 30 members: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,
    18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
Removing node: 25 with metric: 6
Size: 27 members: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,
    18, 19, 20, 21, 22, 23, 24, 26, 27, 30]
Size: 1 members: [25]
Size: 2 members: [28, 29]
Removing node: 5 with metric: 5
Size: 1 members: [1]
Size: 24 members: [2, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
    20, 21, 22, 23, 24, 26, 27, 30]
Size: 1 members: [4]
Size: 1 members: [5]
Size: 1 members: [25]
Size: 2 members: [28, 29]
Removing node: 12 with metric: 5
Size: 1 members: [1]
Size: 20 members: [2, 3, 6, 7, 8, 9, 10, 11, 15, 16, 17, 18, 20, 21, 22, 23,
    24, 26, 27, 30]
Size: 1 members: [4]
Size: 1 members: [5]
Size: 1 members: [12]
Size: 1 members: [13]
Size: 2 members: [14, 19]
Size: 1 members: [25]
Size: 2 members: [28, 29]
Removing node: 6 with metric: 4
Size: 1 members: [1]
Size: 1 members: [2]
Size: 1 members: [3]
Size: 1 members: [4]
Size: 1 members: [5]
Size: 1 members: [6]
Size: 17 members: [7, 8, 9, 10, 11, 15, 16, 17, 18, 20, 21, 22, 23, 24, 26, 27,
    30]
Size: 1 members: [12]
Size: 1 members: [13]
Size: 2 members: [14, 19]
Size: 1 members: [25]
Size: 2 members: [28, 29]
```

Βλέπουμε λοιπόν ότι:

* Η έξοδος του προγράμματος ξεκινά εκτυπώνοντας το μέγεθος του γράφου και τους κόμβους του. 
* Στη συνέχεια για κάθε κόμβο που αφαιρείται εκτυπώνει τον κόμβο και την τιμή της μετρικής που υπολογίστηκε (μέγιστη συνολική επιρροή ή μέγιστος αριθμός συνδέσμων). 
* Μετά από αυτό εκτυπώνει το μέγεθος και τους κόμβους κάθε συνδεδεμένου τμήματος του γράφου που προκύπτει μετά την αφαίρεση του συγκεκριμένου κόμβου.
* Οι κόμβοι κάθε φορά εκτυπώνονται ταξινομημένοι σε αύξουσα σειρά.
* Τα συνδεδεμένα τμήματα εκτυπώνονται και αυτά ταξινομημένα σε αύξουσα σειρά.
* Αν μια γραμμή έχει περισσότερους από 80 χαρακτήρες, θα πρέπει να σπάει στο κοντινότερο κενό πριν από τον 80στο χαρακτήρα και να συνεχίζεται στην επόμενη σειρά με εσοχή τεσσάρων ακριβώς διαστημάτων.

**Επαναλαμβάνουμε ότι η μορφή της εξόδου θα πρέπει να είναι ακριβώς όπως η παραπάνω για να μπορεί να αξιολογηθεί η εργασία.**

Καλή Επιτυχία.

Σημ.: Η εργασία ολοκληρώνεται σε λιγότερο από 200 γραμμές κώδικα Python.
